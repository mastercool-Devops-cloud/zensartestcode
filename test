org.springframework.jdbc.BadSqlGrammarException: StatementCallback; bad SQL grammar [SELECT DBMS_METADATA.GET_DDL('TABLE', FX_FEC_AUTOM_DEV) FROM FX]

	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:103)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:107)
	at org.springframework.jdbc.core.JdbcTemplate.translateException(JdbcTemplate.java:1556)
	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:408)
	at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:476)
	at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:486)
	at com.sb.fedssimplification.automationtesting.repo.SchemaExporterRepository.getTableDDL(SchemaExporterRepository.java:18)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.extension.ExtendWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit.jupiter.SpringExtension;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.StandardOpenOption;
import java.util.List;

@SpringBootTest
@ExtendWith(SpringExtension.class)
public class SchemaExporterTest {

    @Autowired
    private SchemaExporterRepository schemaExporterRepository;

    @Test
    public void testGenerateSchemaDDL() throws IOException {
        List<String> ddlScripts = schemaExporterRepository.getTableDDL();

        // Define the file path: src/main/resources/sql/schema.sql
        String filePath = "src/main/resources/sql/schema.sql";
        File file = new File(filePath);

        // Ensure the directory exists
        file.getParentFile().mkdirs();
        
        // Write to file
        try (FileWriter writer = new FileWriter(file)) {
            for (String ddl : ddlScripts) {
                writer.write(ddl + ";\n\n");
            }
        }
        
        System.out.println("âœ… Schema exported to: " + file.getAbsolutePath());
    }
}
