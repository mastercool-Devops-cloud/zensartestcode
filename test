@Testcontainers
@SpringBootTest
public class OracleTest {

    @Container
    static GenericContainer<?> oracleContainer = new GenericContainer<>("gvenzl/oracle-xe:21-slim-faststart")
            .withExposedPorts(1521)  // Expose the database port
            .withEnv("ORACLE_DATABASE", "testDB")
            .withEnv("ORACLE_PASSWORD", "testPassword")
            .withCreateContainerCmdModifier(cmd -> cmd.getHostConfig()
                    .withPortBindings(List.of("1521:1521"))) // Force fixed port
            .waitingFor(Wait.forListeningPort());

    @DynamicPropertySource
    static void registerOracleProperties(DynamicPropertyRegistry registry) {
        oracleContainer.start();

        String jdbcUrl = "jdbc:oracle:thin:@localhost:1521/testDB";
        registry.add("spring.datasource.url", () -> jdbcUrl);
        registry.add("spring.datasource.username", () -> "system");
        registry.add("spring.datasource.password", () -> oracleContainer.getEnvMap().get("ORACLE_PASSWORD"));
    }

    @BeforeAll
    public static void setUpDatabase() throws Exception {
        try (Connection connection = DriverManager.getConnection(
                "jdbc:oracle:thin:@localhost:1521/testDB", "system", "testPassword");
             Statement statement = connection.createStatement()) {
            // Setup queries here
        }
    }
}

.withCreateContainerCmdModifier(cmd -> {
                HostConfig hostConfig = new HostConfig();
                hostConfig.withPortBindings("1521:1521"); // ðŸ”¹ Bind fixed port 1521
                cmd.withHostConfig(hostConfig); // ðŸ”¹ Set custom host config
            })
