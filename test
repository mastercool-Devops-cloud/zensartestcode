SELECT DBMS_METADATA.GET_DDL('TABLE', ?) FROM DUAL

import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.stereotype.Repository;

import java.util.List;
import java.util.stream.Collectors;

@Repository
public class SchemaExporterRepository {
    private final JdbcTemplate jdbcTemplate;

    public SchemaExporterRepository(JdbcTemplate jdbcTemplate) {
        this.jdbcTemplate = jdbcTemplate;
    }

    // Extract table schema (DDL)
    public String getTableDDL(String schemaName, String tableName) {
        String sql = "SELECT DBMS_METADATA.GET_DDL('TABLE', :tableName, :schemaName) FROM DUAL";

        MapSqlParameterSource params = new MapSqlParameterSource()
                .addValue("tableName", tableName.toUpperCase())
                .addValue("schemaName", schemaName.toUpperCase());

        return namedJdbcTemplate.queryForObject(sql, params, String.class);
    }

    // Extract table data (INSERT statements)
    public List<String> getTableData(String schemaName, String tableName) {
        String sql = "SELECT * FROM " + schemaName + "." + tableName;
        return jdbcTemplate.query(sql, (rs, rowNum) -> {
            int columnCount = rs.getMetaData().getColumnCount();
            StringBuilder insertStmt = new StringBuilder("INSERT INTO " + schemaName + "." + tableName + " VALUES (");
            for (int i = 1; i <= columnCount; i++) {
                Object value = rs.getObject(i);
                if (value instanceof String) {
                    insertStmt.append("'").append(value.toString().replace("'", "''")).append("'");
                } else if (value == null) {
                    insertStmt.append("NULL");
                } else {
                    insertStmt.append(value);
                }
                if (i < columnCount) insertStmt.append(", ");
            }
            insertStmt.append(");");
            return insertStmt.toString();
        });
    }
}

----------------------------------------------
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.extension.ExtendWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit.jupiter.SpringExtension;

import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.util.List;

@SpringBootTest
@ExtendWith(SpringExtension.class)
public class SchemaExporterTest {

    @Autowired
    private SchemaExporterRepository schemaExporterRepository;

    @Test
    public void testGenerateSchemaAndData() throws IOException {
        // Define schema and table name
        String schemaName = "FX";
        String tableName = "FX_FEC_AUTOM_DEV";

        // Fetch table schema (DDL)
        String ddlScript = schemaExporterRepository.getTableDDL(schemaName, tableName);

        // Fetch table data (INSERT statements)
        List<String> insertStatements = schemaExporterRepository.getTableData(schemaName, tableName);

        // Define output file path
        String filePath = "src/test/resources/sql/schema.sql";
        File file = new File(filePath);

        // Ensure directory exists
        file.getParentFile().mkdirs();

        // Write to file
        try (FileWriter writer = new FileWriter(file)) {
            // Write schema DDL
            writer.write("-- Table Schema\n");
            writer.write(ddlScript + ";\n\n");

            // Write data INSERT statements
            writer.write("-- Table Data\n");
            for (String insertStmt : insertStatements) {
                writer.write(insertStmt + "\n");
            }
        }

        System.out.println("Schema & Data for " + tableName + " exported to: " + file.getAbsolutePath());
    }
}

https://docs.oracle.com/error-help/db/ora-01008/

	at org.springframework.jdbc.core.JdbcTemplate.translateException(JdbcTemplate.java:1557)
	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:408)
	at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:476)
	at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:486)
	at com.sb.fedssimplification.automationtesting.repo.SchemaExporterRepository.getTableDDL(SchemaExporterRepository.java:18)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at com.sb.fedssimplification.automationtesting.repo.SchemaExporterRepository$$SpringCGLIB$$0.getTableDDL(<generated>)
	at com.sb.fedssimplification.automationtesting.SchemaExporterTest.testGenerateSchemaDDL(SchemaExporterTest.java:39)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
Caused by: java.sql.SQLException: ORA-01008: not all variables bound

https://docs.oracle.com/error-help/db/ora-01008/
	at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:709)
	at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:609)
	at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:1347)
	at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:1100)
	at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:408)
	at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:499)
	at oracle.jdbc.driver.T4CStatement.doOall8(T4CStatement.java:190)
	at oracle.jdbc.driver.T4CStatement.executeForDescribe(T4CStatement.java:1146)
	at oracle.jdbc.driver.OracleStatement.prepareDefineBufferAndExecute(OracleStatement.java:1412)
	at oracle.jdbc.driver.OracleStatement.executeMaybeDescribe(OracleStatement.java:1286)
	at oracle.jdbc.driver.OracleStatement.executeSQLSelect(OracleStatement.java:1843)
	at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1619)
	at oracle.jdbc.driver.OracleStatement.executeQuery(OracleStatement.java:2216)
	at oracle.jdbc.driver.OracleStatementWrapper.executeQuery(OracleStatementWrapper.java:386)
	at com.zaxxer.hikari.pool.ProxyStatement.executeQuery(ProxyStatement.java:110)
	at com.zaxxer.hikari.pool.HikariProxyStatement.executeQuery(HikariProxyStatement.java)
	at org.springframework.jdbc.core.JdbcTemplate$1QueryStatementCallback.doInStatement(JdbcTemplate.java:463)
	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:393)
	... 16 more
Caused by: Error : 1008, Position : 0, SQL = SELECT DBMS_METADATA.GET_DDL('TABLE', :1 , :2 ) FROM DUAL, Original SQL = SELECT DBMS_METADATA.GET_DDL('TABLE', ?, ?) FROM DUAL, Error Message = ORA-01008: not all variables bound

	at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:717)
	... 33 more


