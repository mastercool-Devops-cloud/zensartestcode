org.opentest4j.AssertionFailedError: 
Expected :{"name":"John","age":30}
Actual   :Request body not available or request not wrapped with ContentCachingRequestWrapper.
import jakarta.servlet.http.HttpServletRequest;
import org.junit.jupiter.api.Test;
import org.springframework.mock.web.MockHttpServletRequest;
import org.springframework.web.util.ContentCachingRequestWrapper;

import java.util.Map;

import static org.junit.jupiter.api.Assertions.assertEquals;

class RequestWrapperTest {

    @Test
    void testRequestWrapper() {
        // Create a MockHttpServletRequest
        MockHttpServletRequest mockRequest = new MockHttpServletRequest();
        mockRequest.setMethod("POST");
        mockRequest.setRequestURI("/api/resource");
        mockRequest.setQueryString("id=123");
        mockRequest.addHeader("Content-Type", "application/json");

        // Add a body to the request
        String requestBody = "{\"name\":\"John\",\"age\":30}";
        mockRequest.setContent(requestBody.getBytes());

        // Wrap the mock request in ContentCachingRequestWrapper
        ContentCachingRequestWrapper wrappedRequest = new ContentCachingRequestWrapper(mockRequest);

        // Create RequestWrapper instance
        RequestWrapper requestWrapper = new RequestWrapper(wrappedRequest);

        // Assertions
        assertEquals("POST", requestWrapper.getMethod());
        assertEquals("/api/resource", requestWrapper.getUri());
        assertEquals("id=123", requestWrapper.getQuery());
        assertEquals(Map.of("Content-Type", "application/json"), requestWrapper.getHeaders());
        assertEquals(requestBody, requestWrapper.getBody());
    }
}
